---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const books = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title="Carlos Aleluia">
	<style>
		.hero {
			padding: 0;
			margin-bottom: 5rem;
		}

		.hero-container {
			position: relative;
			width: 100%;
			height: 600px; /* Desktop hero height */
		}

		/*
		 * HERO LAYOUT — all positions are % of screen width.
		 * Blue box:  15% ——————————————————————— 70%
		 * Image:               55% ———————— 85%
		 * Overlap zone:        55% ———— 70%
		 *
		 * Tweak the left/right values below to adjust positions.
		 */

		/* Blue rectangle — starts at 15%, ends at 70% of screen width */
		.hero-text {
			position: absolute;
			left: 15%;   /* ← Blue box start X */
			right: 30%;  /* ← 100% - 70% = Blue box end X */
			top: 0;
			bottom: 0;
			background: var(--accent-color);
			padding: 5rem 17% 5rem 3rem; /* right padding keeps text before the 55% image overlap */
			display: flex;
			flex-direction: column;
			justify-content: center;
			box-sizing: border-box;
			z-index: 1;
		}

		.hero-text h1 {
			font-size: 3.5rem;
			font-weight: 300;
			letter-spacing: -1px;
			margin-bottom: 2rem;
			line-height: 1.2;
		}

		.hero-text .bio {
			font-size: 1.1rem;
			line-height: 1.8;
			color: var(--text-primary);
		}

		/* Photo — starts at 55%, ends at 85% of screen width, 80% of blue box height */
		.hero-image {
			position: absolute;
			left: 55%;    /* ← Image start X */
			right: 15%;   /* ← 100% - 85% = Image end X */
			top: 10%;     /* ← (100% - 80%) / 2 = vertically centers at 80% height */
			bottom: 10%;  /* ← same as top */
			z-index: 2;
			box-shadow: 0 4px 20px rgba(0,0,0,0.1);
			overflow: hidden;
		}

		.hero-image img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			display: block;
		}

		.books-section {
			padding: 0 0 5rem;
		}

		.section-title {
			font-size: 1.8rem;
			font-weight: 300;
			margin-bottom: 3rem;
			letter-spacing: -0.5px;
		}

		.books-grid {
			display: grid;
			gap: 4rem;
		}

		/* Each book card: cover + text side by side */
		.book-card {
			display: flex;
			gap: 3rem;
			align-items: center;
			padding-bottom: 4rem;
			border-bottom: 1px solid var(--border-color);
		}

		.book-card:last-child {
			border-bottom: none;
		}

		/* Alternate: even cards flip the order (text left, cover right) */
		.book-card:nth-child(even) {
			flex-direction: row-reverse;
		}

		.book-cover {
			flex: 0 0 220px;
			aspect-ratio: 2/3;
			overflow: hidden;
			border-radius: 4px;
			background: #f0f0f0;
		}

		.book-cover img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			display: block;
		}

		.book-info {
			flex: 1;
		}

		.book-card h2 {
			font-size: 2rem;
			font-weight: 400;
			margin-bottom: 0.75rem;
			letter-spacing: -0.5px;
		}

		.book-card h2 a {
			text-decoration: none;
			color: var(--text-primary);
			transition: color 0.2s;
		}

		.book-card h2 a:hover {
			color: var(--text-secondary);
		}

		.book-card .description {
			font-size: 1.05rem;
			line-height: 1.7;
			color: var(--text-secondary);
			margin-top: 1rem;
		}

		.book-card .btn-mais {
			display: inline-block;
			margin-top: 1.5rem;
			padding: 0.6rem 1.8rem;
			border: 1px solid var(--border-color);
			color: var(--text-primary);
			text-decoration: none;
			font-size: 0.95rem;
			transition: all 0.2s;
			letter-spacing: 0.5px;
		}

		.book-card .btn-mais:hover {
			background: var(--bg-hover);
			border-color: var(--text-primary);
		}

		.view-all {
			display: inline-block;
			margin-top: 2rem;
			padding: 0.75rem 2rem;
			border: 1px solid var(--border-color);
			color: var(--text-primary);
			text-decoration: none;
			font-size: 0.95rem;
			transition: all 0.2s;
			letter-spacing: 0.5px;
		}

		.view-all:hover {
			background: var(--bg-hover);
			border-color: var(--text-primary);
		}

		/* Responsive */
		@media (max-width: 968px) {
			.book-card,
			.book-card:nth-child(even) {
				flex-direction: column;
			}

			.book-cover {
				flex: none;
				width: 180px;
			}
		}

		@media (max-width: 968px) {
			.hero-container {
				height: auto;
			}

			.hero-text {
				position: relative;
				left: auto;
				right: auto;
				top: auto;
				bottom: auto;
				width: 100%;
				padding: 4rem 2rem;
			}

			.hero-text h1 {
				font-size: 2.8rem;
			}

			.hero-image {
				position: relative;
				left: auto;
				right: auto;
				top: auto;
				bottom: auto;
				width: 100%;
				height: 400px;
				box-shadow: none;
			}
		}

		@media (max-width: 768px) {
			.hero-text {
				padding: 3rem 1.5rem;
			}

			.hero-text h1 {
				font-size: 2.2rem;
			}

			.hero-image {
				height: 300px;
			}
		}
	</style>

	<section class="hero">
		<div class="hero-container">
			<div class="hero-text">
				<h1>Carlos Aleluia</h1>
				<div class="bio">
					<p>
						Carlos Aleluia é autor de [número] romances que exploram 
						as fronteiras do possível. Os seus livros têm sido publicados 
						em Portugal e traduzidos para [línguas]. Vive em [cidade].
					</p>
				</div>
			</div>
			<div class="hero-image">
				<img src="/perfil.jpg" alt="Carlos Aleluia" />
			</div>
		</div>
	</section>

	<div class="container">
		<section class="books-section">
			<h2 class="section-title">Obras Recentes</h2>
			<div class="books-grid">
				{books.slice(0, 3).map((book) => (
					<article class="book-card">
						<div class="book-cover">
							{book.data.coverImage ? (
								<img src={book.data.coverImage} alt={book.data.title} />
							) : (
								<div style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
							)}
						</div>
						<div class="book-info">
							<h2>
								<a href={`/livros/${book.id}/`}>{book.data.title}</a>
							</h2>
							<p class="description">{book.data.description}</p>
							<a href={`/livros/${book.id}/`} class="btn-mais">Mais</a>
						</div>
					</article>
				))}
			</div>
			<a href="/livros" class="view-all">Ver Todas as Obras</a>
		</section>
	</div>
</BaseLayout>