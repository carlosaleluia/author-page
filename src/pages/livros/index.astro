---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const books = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title="Livros - Carlos Aleluia">
	<style>
		.page-header {
			padding: 5rem 0 4rem;
			border-bottom: 1px solid var(--border-color);
		}

		.page-header h1 {
			font-size: 3rem;
			font-weight: 300;
			letter-spacing: -1px;
		}

		.books-list {
			padding: 4rem 0;
		}

		.book-item {
			padding: 3rem 0;
			border-bottom: 1px solid var(--border-color);
		}

		.book-item:last-child {
			border-bottom: none;
		}

		.book-item h2 {
			font-size: 2.2rem;
			font-weight: 400;
			margin-bottom: 1rem;
			letter-spacing: -0.5px;
		}

		.book-item h2 a {
			text-decoration: none;
			color: var(--text-primary);
			transition: color 0.2s;
		}

		.book-item h2 a:hover {
			color: var(--text-secondary);
		}

		.book-meta {
			color: var(--text-secondary);
			font-size: 0.9rem;
			margin-bottom: 1.25rem;
			text-transform: uppercase;
			letter-spacing: 1px;
			font-weight: 400;
		}

		.book-description {
			font-size: 1.1rem;
			line-height: 1.8;
			color: var(--text-secondary);
			max-width: 700px;
		}

		@media (max-width: 768px) {
			.page-header h1 {
				font-size: 2.2rem;
			}

			.book-item h2 {
				font-size: 1.8rem;
			}
		}
	</style>

	<div class="container">
		<header class="page-header">
			<h1>Livros</h1>
		</header>

		<section class="books-list">
			{books.map((book) => (
				<article class="book-item">
					<h2>
						<a href={`/livros/${book.slug}/`}>{book.data.title}</a>
					</h2>
					<p class="book-meta">
						{book.data.pubDate.toLocaleDateString('pt-PT', {
							year: 'numeric',
							month: 'long'
						})}
					</p>
					<p class="book-description">{book.data.description}</p>
				</article>
			))}
		</section>
	</div>
</BaseLayout>