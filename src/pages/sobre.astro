---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getSortedAwards } from '../lib/premios';

const awards = await getSortedAwards();
---

<BaseLayout title="Sobre - Carlos Aleluia">
	<style>
		.bio-intro {
			display: flex;
			gap: 3rem;
			align-items: flex-start;
			padding: 4rem 0;
		}

		.bio-photo {
			flex: 0 0 250px;
			aspect-ratio: 3/4;
			overflow: hidden;
			border-radius: 4px;
			box-shadow: 0 4px 20px rgba(0,0,0,0.1);
		}

		.bio-photo img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			display: block;
		}

		.bio-text {
			flex: 1;
		}

		.bio-content {
			font-size: 1.1rem;
			line-height: 1.9;
		}

		.bio-content p {
			margin-bottom: 1.5rem;
		}

		.bio-content h2 {
			font-size: 1.8rem;
			font-weight: 400;
			padding-top: 3rem;
			margin: 0 0 1.5rem;
			border-top: 1px solid var(--border-color);
			letter-spacing: -0.5px;
		}

		.bio-content a {
			color: var(--text-primary);
			text-decoration: underline;
			text-underline-offset: 3px;
		}

		.bio-content a.story-row {
			text-decoration: none;
		}

		.stories-list {
			padding: 2rem 0;
		}

		.story-row {
			display: flex;
			align-items: center;
			gap: 1.5rem;
			padding: 1.5rem 0;
			border-bottom: 1px solid var(--border-color);
			text-decoration: none;
			color: inherit;
			transition: background 0.2s;
			margin: 0 -1rem;
			padding-left: 1rem;
			padding-right: 1rem;
			border-radius: 4px;
		}

		.story-row:hover {
			background: var(--bg-hover);
		}

		.story-row-static {
			cursor: default;
		}

		.story-row-static:hover {
			background: none;
		}

		.story-thumbnail {
			width: 120px;
			min-width: 120px;
			height: 80px;
			background: var(--placeholder-bg);
			border-radius: 4px;
			overflow: hidden;
			flex-shrink: 0;
		}

		.story-thumbnail img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			display: block;
		}

		.story-info {
			flex: 1;
			min-width: 0;
		}

		.story-title {
			font-size: 1.2rem;
			font-weight: 400;
			letter-spacing: -0.3px;
			margin-bottom: 0.25rem;
		}

		.story-meta {
			color: var(--text-secondary);
			font-size: 0.9rem;
			margin-bottom: 0.25rem;
		}

		.story-description {
			font-size: 0.9rem;
			color: var(--text-secondary);
			line-height: 1.5;
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
			overflow: hidden;
		}

		.story-external-icon {
			flex-shrink: 0;
			color: var(--text-secondary);
		}

		.empty-state {
			padding: 4rem 0;
			text-align: center;
			color: var(--text-secondary);
			font-size: 1.1rem;
		}

		.contact-list {
			list-style: none;
			display: flex;
			flex-direction: column;
			gap: 0.75rem;
			font-size: 1.1rem;
		}

		.contact-icon {
			display: inline-flex;
			vertical-align: middle;
			margin-right: 0.5rem;
		}

		@media (max-width: 768px) {
			.bio-intro {
				flex-direction: column;
				align-items: center;
			}

			.bio-photo {
				flex: none;
				width: 200px;
			}

			.story-thumbnail {
				width: 80px;
				min-width: 80px;
				height: 56px;
			}

			.story-description {
				display: none;
			}

			.story-row {
				gap: 1rem;
			}
		}
	</style>

	<div class="container">
		<header class="page-header">
			<h1>Sobre</h1>
		</header>

		<div class="bio-intro">
			<div class="bio-photo">
				<img src="/perfil.jpg" alt="Carlos Aleluia" />
			</div>
			<div class="bio-text bio-content">
				<p>
					Carlos Aleluia nasceu em Lisboa e, desde cedo, decidiu que imaginar mundos era bem mais divertido do que somente habitá-los. Atualmente, quando não tem a mente a fervilhar de novas histórias, é engenheiro de software. Talvez por isso ainda tenha um fraquinho especial por ficção científica, género que explorou na sua estreia como autor com o conto «Ágape», vencedor do prémio Ataegina 2021. Conta ainda com contos publicados na Fábrica do Terror e na Revista Palavrar, além de integrar as antologias Treze, Memórias e Almanaque Steampunk, da Editorial Divergência, e as antologias Des/pudor e Desas/sossego, da Edições Trebaruna.
				</p>
			</div>
		</div>

		<section class="bio-content">
			<h2>Prémios</h2>
			{awards.length > 0 ? (
				<div class="stories-list">
					{awards.map((award) => {
						const inner = (
							<>
								<div class="story-thumbnail">
									{award.data.coverImage ? (
										<img src={award.data.coverImage} alt={award.data.title} loading="lazy" />
									) : (
										<div style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
									)}
								</div>
								<div class="story-info">
									<h3 class="story-title">{award.data.title}</h3>
									<p class="story-meta">
										{award.data.placement && `${award.data.placement} · `}
										{award.data.organization}
										{` · ${award.data.pubDate.getFullYear()}`}
									</p>
									{award.data.description && (
										<p class="story-description">{award.data.description}</p>
									)}
								</div>
								{award.data.externalUrl && (
									<svg class="story-external-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
								)}
							</>
						);
						return award.data.externalUrl ? (
							<a href={award.data.externalUrl} target="_blank" rel="noopener noreferrer" class="story-row">
								{inner}
							</a>
						) : (
							<div class="story-row story-row-static">
								{inner}
							</div>
						);
					})}
				</div>
			) : (
				<p class="empty-state">Brevemente.</p>
			)}

			<h2>Contacto</h2>
			<ul class="contact-list">
				<li>
					<span class="contact-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg></span>
					Email: <a href="mailto:carlos@exemplo.com">carlos@exemplo.com</a>
				</li>
				<li>
					<span class="contact-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg></span>
					Instagram: <a href="https://www.instagram.com/carlos.aleluia.t/" target="_blank" rel="noopener noreferrer">carlos.aleluia.t</a>
				</li>
				<li>
					<span class="contact-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M11.43 23.995c-3.608-.208-6.274-2.077-6.448-5.078.695.007 1.375-.013 2.07-.006.224 1.342 1.065 2.43 2.683 3.026 1.583.496 3.737.46 5.082-.174 1.527-.718 2.279-1.96 2.604-3.589.158-.748.2-1.58.202-2.37l-.037-.186c-.555.91-1.275 1.633-2.166 2.124-1.537.848-3.7.986-5.577.384-2.551-.819-3.977-2.845-4.453-5.291-.263-1.355-.2-2.813.133-4.145.576-2.3 2.09-4.025 4.235-4.87 1.768-.695 3.726-.678 5.225.165.776.435 1.325 1.01 1.783 1.676l.054-.015.015-1.554h1.96l-.013 12.298c-.007 1.15-.098 2.144-.378 3.123-.726 2.532-2.603 4.2-5.482 4.552-.488.06-.984.088-1.492.09v-.16zm2.601-7.736c1.09-.527 1.81-1.42 2.182-2.56.373-1.138.378-2.442.183-3.602-.236-1.406-.73-2.588-1.774-3.39-.847-.651-2.06-.898-3.182-.746-1.478.2-2.482 1.048-3.06 2.293-.474 1.023-.635 2.26-.534 3.473.105 1.267.44 2.418 1.2 3.345.718.877 1.742 1.36 2.988 1.37 1.114-.003 1.912-.28 2.007-.183h-.01z"/></svg></span>
					Goodreads: <a href="https://www.goodreads.com/author/show/22010507.Carlos_Aleluia" target="_blank" rel="noopener noreferrer">Carlos Aleluia</a>
				</li>
			</ul>
		</section>
	</div>
</BaseLayout>
